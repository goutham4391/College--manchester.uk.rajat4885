$(document).ready(function(){"use strict";var a;a=$("html").hasClass("touch")?"active":"hover",$(".megaLink").each(function(){var a=$(this);a.attr("role","button").attr("aria-expanded","false").attr("aria-controls",a.next().prop("id"))}),$(".megaContent").each(function(){var a=$(this);a.attr("role","region").attr("aria-expanded","false").attr("aria-hidden","true").attr("aria-labelledby",a.prev().prop("id"))}),$(".megaContent").each(function(){var a=$(this);a.find(".megaSubPanel").first().addClass("first-subpanel"),a.find(".megaSubPanel").last().addClass("last-subpanel"),a.find("a").first().addClass("first-link"),a.find("a").last().addClass("last-link")});var c,b=$(".megaLink").length;$(".megaLink").on("keydown",function(d){var e=$(this);c=e.index(".megaLink"),[27,32,37,38,39,40].indexOf(d.keyCode)>-1&&d.preventDefault(),9==d.keyCode&&d.shiftKey&&e.parent().hasClass(a)&&(e.parent().removeClass(a),e.attr("aria-expanded","false").next().attr("aria-expanded","false").attr("aria-hidden","true"),c>0&&(d.preventDefault(),$(".megaLink:eq("+(c-1)+")").focus(),$(".megaLink:eq("+(c-1)+")").parent().addClass(a),$(".megaLink:eq("+(c-1)+")").attr("aria-expanded","true").next().attr("aria-expanded","true").attr("aria-hidden","false"))),27==d.keyCode&&(e.parent().removeClass(a),e.attr("aria-expanded","false").next().attr("aria-expanded","false").attr("aria-hidden","true")),32==d.keyCode&&(e.parent().toggleClass(a),"false"==e.attr("aria-expanded")?e.attr("aria-expanded","true").next().attr("aria-expanded","true").attr("aria-hidden","false"):e.attr("aria-expanded","false").next().attr("aria-expanded","false").attr("aria-hidden","true")),37==d.keyCode&&c>0&&(e.parent().hasClass(a)?(e.parent().removeClass(a),e.attr("aria-expanded","false").next().attr("aria-expanded","false").attr("aria-hidden","true"),$(".megaLink:eq("+(c-1)+")").focus().parent().addClass(a),$(".megaLink:eq("+(c-1)+")").attr("aria-expanded","true").next().attr("aria-expanded","true").attr("aria-hidden","false")):$(".megaLink:eq("+(c-1)+")").focus()),39==d.keyCode&&c<b-1&&(e.parent().hasClass(a)?(e.parent().removeClass(a),e.attr("aria-expanded","false").next().attr("aria-expanded","false").attr("aria-hidden","true"),$(".megaLink:eq("+(c+1)+")").focus().parent().addClass(a),$(".megaLink:eq("+(c+1)+")").attr("aria-expanded","true").next().attr("aria-expanded","true").attr("aria-hidden","false")):$(".megaLink:eq("+(c+1)+")").focus()),38==d.keyCode&&e.parent().hasClass(a)&&(e.parent().removeClass(a),e.attr("aria-expanded","false").next().attr("aria-expanded","false").attr("aria-hidden","true")),40==d.keyCode&&(e.parent().addClass(a),e.attr("aria-expanded","true").next().attr("aria-expanded","true").attr("aria-hidden","false"),e.next().find("a").first().focus())}),$(".megaSubPanel a").on("keydown",function(d){[27,32,37,38,39,40].indexOf(d.keyCode)>-1&&d.preventDefault();var e=$(this),f=e.closest(".megaContent").find("a");e.hasClass("last-link")&&9==d.keyCode&&!d.shiftKey&&(e.closest(".menuItem").removeClass(a),$(".megaLink:eq("+c+")").attr("aria-expanded","false").next().attr("aria-expanded","false").attr("aria-hidden","true"),c=e.closest(".menuItem").find(".megaLink").index(".megaLink"),c<b-1&&($(".megaLink:eq("+(c+1)+")").parent().addClass(a),$(".megaLink:eq("+(c+1)+")").attr("aria-expanded","true").next().attr("aria-expanded","true").attr("aria-hidden","false"))),27==d.keyCode&&e.closest(".menuItem").removeClass(a).find(".megaLink").focus().attr("aria-expanded","false").next().attr("aria-expanded","false").attr("aria-hidden","true"),37==d.keyCode&&(e.closest(".megaSubPanel").hasClass("first-subpanel")?e.closest(".menuItem").find(".megaLink").focus():e.closest(".megaSubPanel").prev().find("a").first().focus()),39==d.keyCode&&(e.closest(".megaSubPanel").hasClass("last-subpanel")?e.closest(".menuItem").find(".megaLink").focus():e.closest(".megaSubPanel").next().find("a").first().focus()),38==d.keyCode&&(e.hasClass("first-link")?e.closest(".menuItem").find(".megaLink").focus():e.closest(".megaContent").find("a").eq(f.index(e)-1).focus()),40==d.keyCode&&(e.hasClass("last-link")?(c=e.closest(".menuItem").find(".megaLink").index(".megaLink"),c<b-1&&(e.closest(".menuItem").removeClass(a).find(".megaLink").attr("aria-expanded","false").next().attr("aria-expanded","false").attr("aria-hidden","true"),$(".megaLink:eq("+(c+1)+")").focus().parent().addClass(a),$(".megaLink:eq("+(c+1)+")").attr("aria-expanded","true").next().attr("aria-expanded","true").attr("aria-hidden","false"))):e.closest(".megaContent").find("a").eq(f.index(e)+1).focus())})});